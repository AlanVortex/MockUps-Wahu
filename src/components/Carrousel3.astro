---
// Importación de imágenes
import willElenco from "../assets/willElenco.jpeg";
import watsonElenco from "../assets/watsonElenco.jpeg";
import starkElenco from "../assets/starkElenco.jpeg";
import rockElenco from "../assets/rockElenco.jpeg";
import eizaElenco from "../assets/eizaElenco.jpeg";

const images = [
    { src: willElenco.src, alt: "Will Elenco" },
    { src: watsonElenco.src, alt: "Watson Elenco" },
    { src: starkElenco.src, alt: "Stark Elenco" },
    { src: rockElenco.src, alt: "Rock Elenco" },
    { src: eizaElenco.src, alt: "Eiza Elenco" },
];
---

<div class="relative mt-6">
    <!-- Botón Izquierdo -->
    <button
        onclick="document.getElementById('carousel').scrollBy({ left: -300, behavior: 'smooth' })"
        class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full z-10"
        aria-label="Scroll Left"
    >
        &#8592;
    </button>

    <!-- Contenedor del carrusel -->
    <div
        id="carousel"
        class="flex overflow-x-auto flex-nowrap gap-4 w-full scrollbar-hide scroll-smooth"
    >
        {
            images.map((image, index) => (
                <img
                    src={image.src}
                    alt={image.alt}
                    class="w-auto max-h-48 object-cover rounded-md hover-effect cursor-pointer"
                    data-src={image.src}
                    data-alt={image.alt}
                />
            ))
        }
    </div>

    <!-- Botón Derecho -->
    <button
        onclick="document.getElementById('carousel').scrollBy({ left: 300, behavior: 'smooth' })"
        class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full z-10"
        aria-label="Scroll Right"
    >
        &#8594;
    </button>

    <!-- Modal de imagen expandida -->
    <div
        id="imageModal"
        class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-75 z-20"
    >
        <div class="relative">
            <img
                id="modalImage"
                src=""
                alt=""
                class="max-w-full max-h-[90vh] object-contain rounded-md"
            />
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const modal = document.getElementById("imageModal");
        const modalImage = document.getElementById(
            "modalImage",
        ) as HTMLImageElement;
        const closeModalButton = document.getElementById("closeModalButton");

        if (!modal || !modalImage) {
            console.error(
                "El modal o la imagen del modal no se encontraron en el DOM.",
            );
            return;
        }

        // Abrir modal al hacer clic en una imagen
        document.querySelectorAll("#carousel img").forEach((img) => {
            img.addEventListener("click", () => {
                const src = img.getAttribute("data-src");
                const alt = img.getAttribute("data-alt");

                if (!src || !alt) {
                    console.error(
                        "La imagen no tiene los atributos 'data-src' o 'data-alt'.",
                    );
                    return;
                }

                modalImage.src = src;
                modalImage.alt = alt;
                modal.classList.remove("hidden");
                modal.classList.add("flex");
            });
        });

        // Cerrar modal al hacer clic en el botón de cierre o en el fondo
        modal.addEventListener("click", (e) => {
            if (e.target === modal || e.target === closeModalButton) {
                modal.classList.remove("flex");
                modal.classList.add("hidden");
            }
        });
    });
</script>

<style>
    .scrollbar-hide {
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE y Edge */
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none; /* Chrome, Safari y Edge */
    }
    .hover-effect {
        transition:
            transform 0.3s ease,
            box-shadow 0.3s ease;
        transform-origin: center center;
    }
    .hover-effect:hover {
        transform: scale(1.1);
        box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3);
    }
    #imageModal img {
        animation: fadeIn 0.3s ease-in-out;
    }
    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    #carousel {
        overflow: hidden;
        position: relative;
    }
</style>
