---
import { onMount } from "solid-js";
import { Image } from "astro:assets";
import WahuDark2020 from "../assets/WahuDark2020.svg";

onMount(() => {
  const menuButton = document.querySelector("#mobile-menu-button");
  const menu = document.querySelector("#mobile-menu");

  console.log("onMount executed");

  if (menuButton) {
    console.log("Menu button found");
  } else {
    console.error("Menu button not found");
  }

  if (menu) {
    console.log("Menu found");
  } else {
    console.error("Menu not found");
  }

  menuButton?.addEventListener("click", () => {
    console.log("Menu button clicked");
    menu?.classList.toggle("hidden");
    console.log("Menu visibility toggled");
  });
});
---

<nav class="bg-gray-800 text-white py-4 z-50 fixed top-0 w-full shadow-xl">
  <div class="mx-auto flex justify-between items-center px-4 md:px-8">
    <!-- Logo -->
    <div class="flex items-center">
      <a href="/cinema">
        <Image src={WahuDark2020} alt="Wahu Logo" class="h-10 w-auto" />
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-button"
      class="md:hidden flex flex-col justify-center items-center w-8 h-8 text-gray-400 hover:text-white focus:outline-none"
    >
      <span class="block w-6 h-0.5 bg-current transition-transform duration-300"
      ></span>
      <span
        class="block w-6 h-0.5 bg-current my-1 transition-opacity duration-300"
      ></span>
      <span class="block w-6 h-0.5 bg-current transition-transform duration-300"
      ></span>
    </button>

    <!-- Desktop Menu -->
    <div class="hidden md:flex space-x-4 ml-20">
      <a href="/" class="nav-link hover:text-gray-300 text-gray-400">ARIADNE</a>
      <a href="/creators" class="nav-link hover:text-gray-300 text-gray-400"
        >CREADORES</a
      >
      <a href="/cinema" class="nav-link hover:text-gray-300 text-gray-400"
        >Cinema</a
      >
      <a href="/festivals" class="nav-link hover:text-gray-300 text-gray-400"
        >Festivales</a
      >
      <a href="/academy" class="nav-link hover:text-gray-300 text-gray-400"
        >Academia</a
      >
      <a href="/tv" class="nav-link hover:text-gray-300 text-gray-400">TV</a>
    </div>

    <!-- Contact and Login -->
    <div class="hidden md:flex space-x-4">
      <button
        class="bg-transparent text-gray-400 font-semibold py-2 px-4 hover:border-transparent rounded"
        onclick="window.location.href='mailto:info@wahustreaming.com?subject=Consulta&body=Hola, tengo una pregunta.'"
      >
        CONTÁCTANOS
      </button>

      <button
        class="bg-transparent text-gray-700 font-semibold hover:text-white py-2 px-4 border border-gray-500 hover:border-transparent hover:bg-gray-500 transition duration-400 rounded-md"
      >
        INGRESAR
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="hidden fixed top-16 left-0 w-full bg-gray-700 md:hidden"
  >
    <div class="flex flex-col space-y-2 py-4 px-4 justify-center items-center">
      <a href="/" class="nav-link hover:text-gray-300 text-gray-400">ARIADNE</a>
      <a href="/creators" class="nav-link hover:text-gray-300 text-gray-400"
        >CREADORES</a
      >
      <a href="/cinema" class="nav-link hover:text-gray-300 text-gray-400"
        >Cinema</a
      >
      <a href="/festivals" class="nav-link hover:text-gray-300 text-gray-400"
        >Festivales</a
      >
      <a href="/academy" class="nav-link hover:text-gray-300 text-gray-400"
        >Academia</a
      >
      <a href="/tv" class="nav-link hover:text-gray-300 text-gray-400">TV</a>
      <hr class="border-gray-600 w-full my-2" />
      <button
        class="bg-transparent text-gray-400 font-semibold py-2 hover:border-transparent rounded"
        onclick="window.location.href='mailto:info@wahustreaming.com?subject=Consulta&body=Hola, tengo una pregunta.'"
      >
        CONTÁCTANOS
      </button>

      <button
        class="bg-transparent text-white font-semibold hover:text-white py-2 px-4 border border-gray-500 hover:border-transparent hover:bg-gray-500 transition duration-400 rounded-md"
      >
        INGRESAR
      </button>
    </div>
  </div>
</nav>

<script>
  const button = document.querySelector("#mobile-menu-button") as Element;
  const menu = document.querySelector("#mobile-menu") as Element;

  button.addEventListener("click", () => {
    menu.classList.toggle("hidden");
  });
</script>
