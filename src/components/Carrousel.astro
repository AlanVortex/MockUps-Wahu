---
import detalleAriadne from "../assets/detalleAriadne.jpeg";
import detalle2Ariadne from "../assets/detalle2Ariadne.jpeg";
import detalle3Ariadne from "../assets/detalle3Ariadne.jpg";
import detalle4Ariadne from "../assets/detalle4Ariadne.jpeg";
import detalle5Ariadne from "../assets/detalle5Ariadne.jpg";

// Lista de imágenes con su fuente y descripción
const images = [
  { src: detalleAriadne.src, alt: "Detalle Ariadne 1" },
  { src: detalle2Ariadne.src, alt: "Detalle Ariadne 2" },
  { src: detalle3Ariadne.src, alt: "Detalle Ariadne 3" },
  { src: detalle4Ariadne.src, alt: "Detalle Ariadne 4" },
  { src: detalle5Ariadne.src, alt: "Detalle Ariadne 5" },
  { src: detalleAriadne.src, alt: "Detalle Ariadne 1" },
  { src: detalle2Ariadne.src, alt: "Detalle Ariadne 2" },
  { src: detalle3Ariadne.src, alt: "Detalle Ariadne 3" },
  { src: detalle4Ariadne.src, alt: "Detalle Ariadne 4" },
  { src: detalle5Ariadne.src, alt: "Detalle Ariadne 5" },
];
---

<div class="relative mt-6">
  <!-- Botón Izquierdo -->
  <button
    onclick="document.getElementById('carousel').scrollBy({ left: -300, behavior: 'smooth' })"
    class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full z-10"
    aria-label="Scroll Left"
  >
    &#8592;
  </button>

  <!-- Contenedor del carrusel -->
  <div
    id="carousel"
    class="flex overflow-x-auto flex-nowrap gap-4 w-full scrollbar-hide scroll-smooth"
  >
    {
      images.map((image, index) => (
        <img
          src={image.src}
          alt={image.alt}
          class="w-auto max-h-48 object-cover rounded-md hover-effect cursor-pointer"
          data-src={image.src}
          data-alt={image.alt}
        />
      ))
    }
  </div>

  <!-- Botón Derecho -->
  <button
    onclick="document.getElementById('carousel').scrollBy({ left: 300, behavior: 'smooth' })"
    class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full z-10"
    aria-label="Scroll Right"
  >
    &#8594;
  </button>

  <!-- Modal de imagen expandida -->
  <div
    id="imageModal"
    class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-75 z-20"
  >
    <div class="relative pt-20">
      <img
        id="modalImage"
        src=""
        alt=""
        class="max-w-full max-h-[90vh] object-contain rounded-md"
      />
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("imageModal");
    const modalImage = document.getElementById("modalImage") as HTMLImageElement;
    const closeModalButton = document.getElementById("closeModalButton");
    let zoomLevel = 1; // Nivel inicial de zoom

    if (!modal || !modalImage) {
      console.error("El modal o la imagen del modal no se encontraron en el DOM.");
      return;
    }

    // Abrir modal al hacer clic en una imagen
    document.querySelectorAll("#carousel img").forEach((img) => {
      img.addEventListener("click", () => {
        const src = img.getAttribute("data-src");
        const alt = img.getAttribute("data-alt");

        if (!src || !alt) {
          console.error("La imagen no tiene los atributos 'data-src' o 'data-alt'.");
          return;
        }

        modalImage.src = src;
        modalImage.alt = alt;
        modal.classList.remove("hidden");
        modal.classList.add("flex");
        document.body.classList.add("overflow-hidden"); // Bloquear scroll
      });
    });

    // Cerrar modal al hacer clic en el fondo
    modal.addEventListener("click", (e) => {
      if (e.target === modal || e.target === closeModalButton) {
        modal.classList.remove("flex");
        modal.classList.add("hidden");
        document.body.classList.remove("overflow-hidden"); // Restaurar scroll
        zoomLevel = 1; // Reiniciar zoom
        modalImage.style.transform = "scale(1)";
      }
    });

    // Controlar el zoom con el scroll
    modal.addEventListener("wheel", (e) => {
      e.preventDefault(); // Evitar el scroll de la página
      const zoomStep = 0.1; // Incremento de zoom
      if (e.deltaY < 0) {
        zoomLevel = Math.min(zoomLevel + zoomStep, 3); // Limitar zoom máximo
      } else {
        zoomLevel = Math.max(zoomLevel - zoomStep, 1); // Limitar zoom mínimo
      }
      modalImage.style.transform = `scale(${zoomLevel})`;
    });
  });
</script>


<style>
  .overflow-hidden {
    overflow: hidden;
  }

  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE y Edge */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari y Edge */
  }
  .hover-effect {
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;
    transform-origin: center center;
  }
  .hover-effect:hover {
    transform: scale(1.1);
    box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3);
  }
  #imageModal img {
    height: 30vw;
    width: auto;
    animation: fadeIn 0.3s ease-in-out;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  #carousel {
    overflow: hidden;
    position: relative;
  }
</style>
